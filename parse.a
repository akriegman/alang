
=Val
+---{reg-usize

=Inst
+---{mv-(-Val
    |   (-Val
    |
    {add(-Val
        (-Val

=Processor
+---(register_names-Vec-String
    (program-Vec-Inst

 (self-&mut-Processor
:(asm-&str
|
>-(self=     +--+
  (asm--lines+)(+next{none-ok}>-=parse
     continue-)      {some-split_whitespace-mut=words

  self(register_names-iter-)position{some--Val::reg}--ok}>-=parse_val
                  >-)eq->--)        {none--!)#format-err}
                   +) "{} is not a register")
  >-words-next{some+------------------------)
              {none----------!)#format-err}>
  "{} expects another operand")
                  +-----------)
                  |
  words-next{none-%-=continue        self(program-)push-=continue
            {some-+{"mv"-+parse_val?;)--Inst::mv}-)
                   |     $parse_val?-)          |
                   |                            |
                   {"add"+parse_val?;)-Inst::add}
                         $parse_val?-)
